<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc tocdepth="3"?>
<?rfc tocindent="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>
<?rfc compact="no"?>
<?rfc subcompact="no"?>
<?rfc authorship="yes"?>
<?rfc tocappendix="yes"?>

<rfc category="info" docName="draft-thubert-raw-technologies-00" ipr="trust200902">

<front>
   <title abbrev="RAW Techs">Reliable and Available Wireless Technologies</title>
   <author initials="P" surname="Thubert" fullname="Pascal Thubert" role="editor">
      <organization abbrev="Cisco Systems">Cisco Systems, Inc</organization>
      <address>
         <postal>
            <street>Building D</street>
            <street>45 Allee des Ormes - BP1200 </street>
            <city>MOUGINS - Sophia Antipolis</city>
            <code>06254</code>
            <country>FRANCE</country>
         </postal>
         <phone>+33 497 23 26 34</phone>
         <email>pthubert@cisco.com</email>
      </address>
   </author>

   <date/>
   <area>Internet Area</area>
   <workgroup>RAW</workgroup>
   <keyword>Draft</keyword>
   <abstract>
      <t>   This document presents a series of recent technologies that are 
      capable of time synchronization and scheduling of transmission, making 
      them suitable to carry time-sensitive flows with requirements of both
      reliable delivery in bounded time, and availability at all times,
      regardless of packet transmission or individual equipement failures.
      </t>
   </abstract>
</front>

<middle>
   <section title="Introduction">
   <t>
   When used in math or philosophy, the term "deterministic" generally refers to 
   a perfection where all aspect are understood and predictable. A perfectly
   Deterministic Network would ensure that every packet reach its destination
   following a predetermined path along a predefined schedule to be delivered at
   the exact due time. In a real and imperfect world, a Deterministic Network 
   must highly predictable, which is a combination of reliability and
   availability. On the one hand the network must be reliable, meaning that it
   will perform as expected for all packets and in particular that it will
   always deliver the packet at the destination in due time. On the other hand,
   the network must be available, meaning that it is resilient to any single
   outage, whether the cause is a software, a hardware or a transmission issue. 
   
   </t>
   <t>
   
   RAW (Reliable and Available Wireless) is an effort to provide Deterministic
   Networking on across a path that include a a wireless physical layer.          
   Making Wireless Reliable and Available is even more challenging than it is
   with wires, due to the numerous causes of loss in transmission that add up 
   to the congestion losses and the delays caused by overbooked shared resources.
   In order to maintain a similar quality of service along a multihop path that 
   is composed of wired and wireless hops, additional methods that are specific
   to wireless must be leveraged to combat the sources of loss that are also
   specific to wireless.
   
   </t>
   <t>

   Such wireless-specific methods include per-hop retransmissions (HARQ) and
   P2MP overhearing whereby multiple receivers are scheduled to receive the same
   transmission, which balances the adverse effects of the transmission losses
   that are eperienced when a radio is used as pure P2P.
   
   </t>
   </section><!-- title="Introduction"-->
   
   <section title="Terminology">
   <t>This specification uses a number of terms that are uncommon on protocols
   that ensure bets effort transmissions for stochastics flows, such as found in 
   the traditional Internet and other statistically multiplexed packet networks.
   
       <list hangIndent="6" style="hanging">
       <t hangText="Reliable:"> That consistently performs as expected, the
       expectation for a network being to always deliver a packet in due time.</t>
       <t hangText="Available:"> That is exempt of unscheduled outage, the
       expectation for a network being that the flow is maintained in the face
       of any single breakage.</t>
       <t hangText="PAREO (functions):"> the wireless extension of DetNet PREOF.
       PAREO functions include scheduled ARQ at selected hops, and expect the
       use of new operations like overhearing where available.</t>
       <t hangText="Track:"> A DODAG oriented to a destination,and that enables
       Packet ARQ, Replication, Elimination, and Ordering Functions.</t>
       <t hangText="ARQ:"> Automatic Repeat Request, enabling an acknowledged
       transmission, which is the typical model at Layer-2 on a wireless medium.
       </t>
       <t hangText="HARQ:"> Forward error correction, sending redundant coded
       data to help the receiver recover transmission errors.</t>
       <t hangText="HARQ:"> Hybrid ARQ, a combination of FEC and ARQ .</t>
       </list>
   </t>
   </section><!-- Terminology -->
   
   <section title="On Scheduling">
   <t>
       
   The operations of a Deterministic Network often rely on precisely
   applying a tight schedule, in order to avoid collision loss and guarantee
   the worst case time of delivery . To achieve this, there must be a shared
   sense of time throughout the network. The sense of time is 
   usually provided by the lower layer and is not in scope for RAW. 
   </t>
   
   
   <section anchor="wbenef" title="Benefits of Scheduling on Wires">
   <t>
   
   A network is reliable when the statistical effects that affect the packet 
   transmission are eliminated. This involves maintaining at all time the amount
   of critical packets within the physical capabilities of the hardware and that 
   of the radio medium. This is achieved by controlling the use of time-shared
   resources such as CPUs and buffers, by shaping the flows and by scheduling
   the time of transmission of the packets that compose the flow at every hop.
   
   </t>
   <t>

   Equipment failure, such as an access point rebooting, a broken radio adapter,
   or a permanent obstacle to the transmission, is a secondary source of packet
   loss. When a breakage occurs, multiple packets are lost in a row before the
   flows are rerouted or the system may recover. This is not acceptable for
   critical applications such as related to safety. A typical process control
   loop will tolerate an occasional packet loss, but a loss of several packets
   in a row will cause an emergency stop (e.g., after 4 packets lost, within a
   period of 1 second).
   
   </t>
   <t>
      
   Network Availability is obtained by making the transmission resilient against
   hardware failures and radio transmission losses due to uncontrolled events
   such as co-channel interferers, multipath fading or moving obstacles. The
   best results are typically achieved by pseudo randomly cumulating all forms
   of diversity, in the spatial domain with replication and elimination, in the
   time domain with ARQ and diverse scheduled transmissions, and in the
   frequency domain with frequency hopping or channel hopping between frames. 
   
   </t>
   </section><!-- Benefits of Scheduling on Wires -->
   
   <section anchor="wessbenef" title="Benefits of Scheduling on Wireless">

   <t>
   In addition to the benefits listed in <xref target="wbenef"/>, scheduling
   transmissions provides specific value to the wireless medium.
   </t>
   <t>
   On the one hand, scheduling avoids collisions between scheduled transmissions
   and can ensure both time and frequency diversity between retries in order
   to defeat co-channel interference from uncontroller transmitters as well as
   multipath fading. Transmissions can be scheduled on multiple channels in
   parallel, which enables to use the full available spectrum while avoiding the
   hidden terminal problem, e.g., when the next packet in a same flow interferes
   on a same channel with the previous one that progressed a few hops farther.
   </t>
   <t>   
   On the other hand, scheduling optimizes the bandwidth usage: compared to
   classical Collision Avoidance techniques, there is no blank time related to
   inter-frame space (IFS) and exponential back-off in scheduled operations.
   A minimal Clear Channel Assessment may be needed to comply with the local
   regulations such as ETSI 300-328, but that will not detect a collision when
   the senders are synchronized.
   And because scheduling allows a time sharing operation, there is no limit to
   the ratio of isolated critical traffic.
   </t>
   <t>   
   Finally, scheduling plays a critical role to save energy. In IOT, energy is
   the foremost concern, and synchronizing sender and listener enables to
   maintain them in deep sleep at all times when there is no scheduled
   transmission. This avoids idle listening and long preambles and enables long
   sleep periods between traffic and resynchronization, allowing 
   battery-operated nodes to operate in a mesh topology for multiple years.
   </t>
   </section><!-- Benefits of Scheduling on Wireless -->
   
   </section><!-- Scheduling -->
   
    <!--
      BEGIN   
      <?rfc include="draft-include-raw-technologies-TSCH"?> 
   
     -->
  

   
   <section title="TimeSlotted Channel Hopping">
      <t>
      TODO
      </t>

   <section title="Provenance and Documents">

   
<!--  - Which SDO, position wrt Open standards -->
   <t>
   The IEEE is an open standardizatoin body participated by technical 
   professional organizations and individuals with amongst other goals the 
   creation of open standard specifications. The IEEE standardization activities
   embrace broad technological areas with the objective to advance technology of
   the technology for the benefit of humanity.
   </t>
   <t>
   The IEEE802.15.4 Task Group has been driving the development of low-power 
   low-cost radio technology. The Timeslotted Channel Hopping mode, added to the
   2015 revision of the IEEE802.15.4 standard <xref target="IEEE802154"/>, is 
   targeted at the embedded and industrial world, where reliability, energy 
   consumption and cost drive the application space.
   The IEEE802.15.4 physical layer has been designed to support demanding 
   low-power scenarios targeting the use of unlicensed bands, both the 2.4 GHz 
   and sub GHz Industrial, Scientific and Medical (ISM) bands. This has imposed 
   requirements in terms of frame size, data rate and bandwidth to achieve 
   reduced collision probability, reduced packet error rate, and acceptable 
   range with limited transmission power. The PHY layer supports frames of up to
   127 bytes. The Medium Access Control (MAC) sublayer overhead is in the order
   of 10-20 bytes, leaving about 100 bytes to the upper layers. IEEE802.15.4 
   uses spread spectrum modulation such as the Direct Sequence Spread 
   Spectrum (DSSS).
   </t>
 <!--   - Existing IP over foo -->
   <t>
   IPv6 over TSCH is enabled by the work done at the 6TiSCH WG. 6TiSCH has 
   enabled best effort distributed scheduling to exploit the deterministic 
   access capabilities provided by TSCH. The group designed the essential 
   mechanisms to enable the management plane operation while ensuring IPv6 is 
   supported. Yet the charter did not focus to providing a solution to establish
   end to end tracks while meeting quality of service requirements. 6TiSCH, 
   through the RFC8480 <xref target="RFC8480"/> defines the 6P protocol which 
   provides a pairwise negotiation mechanism to the control plane operation. 
   The protocol supports agreement on a schedule between neighbors, enabling 
   distributed scheduling. 
   6P goes hand-in-hand with a Scheduling Function (SF), the policy that decides
   how to maintain cells and trigger 6P transactions. The Minimal Scheduling 
   Function (MSF) <xref target="I-D.ietf-6tisch-msf"/> is the default SF defined
   by the 6TiSCH WG; other standardized SFs can be defined in the future. 
   MSF extends the minimal schedule configuration, and is used to add 
   child-parent links according to the traffic load. 
   </t>

   <!--  TSN-like activities, past and present (introduce the likes of as OFDMA, URLLC and EHT) -->
   <t>
   Time sensitive networking on low power constrained wireless networks have 
   been addressed by ISA100.11a and WirelessHART. 
   TODO
   </t>
   <!--  Pascal help here -->

 
     <!--  DetNet-like arching art (introduce the likes of ISA100.11a or WiHART) -->
   <t>  
   The 6TiSCH architecture <xref target="I-D.ietf-6tisch-architecture"/> already
   identified diferent models to schedule resources along tracks exploiting the
   TSCH schedule structure however these models have not been standardized.  A
   Track, in the 6TiSCH architecture is considered a directed path from a source
   6TiSCH  node to one or more destination(s) 6TiSCH node(s) through the 6TiSCH
   network. A Track in 6TiSCH is the implementation of the deterministic path in
   the Detnet architecture  <xref target="I-D.ietf-detnet-architecture"/> . 
   Along a Track, 6TiSCH nodes reserve the resources to enable the eficient 
   transmission of packets while aiming to optimize certain properties such as
   reliability, ensure small jitter or bounded latency. The track structure 
   enables Layer-2 forwarding schemes, reducing the overhead of taking routing
   decisions at the Layer-3.  
   Serial Tracks can be understood as the concatenation of cells or bundles
   along a routing path from a node towards a destination. The serial track
   concept is analogous to the circuit concept where resources are chained
   through the multi-hop topology. For example A bundle of Tx Cells in a
   particular node is paired to a bundle of Rx Cells in the next hop node
   following a routing path.   More complex approaches are described in 
  <!--  <xref target="I-D.papadopoulos-6tisch-pre-reqs"/> --> and complemented by 
   extensions to the RPL routing protocol in 
   <xref target="I-D.ietf-roll-nsa-extension"/>.
   Reliability measures are for example achieved by exploiting concepts such as
   Replication and Elimination. In them, packets at origin are replicated and
   transmitted along disjoint tracks.  This redundancy measure exploiting track
   forwarding increases energy consumption of the network nodes but improves
   significantly the reliability of the network.   
   </t>
   </section><!-- Provenance and Documents   -->
   
   <section title="General Characteristics">
   <t>  
   As a core technique in IEEE802.15.4, TSCH splits time in multiple time slots 
   that repeat over time. The structure is referred as a Slotframe. For each 
   timeslot, a set of available frequencies can be used, resulting in a 
   matrix-like schedule (see Fig. <xref target="fig_slotframe"/>). 
   </t>
<t>
<figure title="Slotframe example with scheduled cells between nodes A, B and C"  anchor="fig_slotframe">
<artwork><![CDATA[
                       timeslot offset
     | 0    1    2    3    4  | 0    1    2    3    4  |    Nodes
     +------------------------+------------------------+   +-----+
     |    |    |    |    |    |    |    |    |    |    |   |  C  |
CH-1 | EB |    |    |C->B|    | EB |    |    |C->B|    |   |     |
     |    |    |    |    |    |    |    |    |    |    |   +-----+
     +-------------------------------------------------+      |
     |    |    |    |    |    |    |    |    |    |    |      |
CH-2 |    |    |B->C|    |B->A|    |    |B->C|    |B->A|   +-----+
     |    |    |    |    |    |    |    |    |    |    |   |  B  |
     +-------------------------------------------------+   |     |
 ...                                                       +-----+  
                                                              |
     +-------------------------------------------------+      |
     |    |    |    |    |    |    |    |    |    |    |   +-----+     
CH-15|    |A->B|    |    |    |    |A->B|    |    |    |   |  A  |
     |    |    |    |    |    |    |    |    |    |    |   |     |
     +-------------------------------------------------+   +-----+ 
ch.
offset                                                           
]]></artwork> 
</figure>
</t>

   <t>
   This schedule represents the possible communications of a node with its
   neighbors, and is managed by a Scheduling Function such as The Minimal
   Scheduling Function (MSF)  <xref target="I-D.ietf-6tisch-msf"/>. Each cell in
   the schedule is identified by its slotoffset and channeloffset coordinates. A
   cell's timeslot offset indicates its position in time, relative to the
   beginning of the slotframe. A cell's channel offset is an index which maps to
   a frequency at each iteration of the slotframe. Each packet exchanged between
   neighbors happens within one cell. An Absolute Slot Number (ASN) indicates
   the number of slots elapsed since the network started. It increments at every
   slot. This is a 5 byte counter that can support networks running for more
   than 300 years without wrapping (assuming a 10 ms timeslot). Channel hopping
   provides increased reliability to multi-path fading and external
   interference. It is handled by TSCH through a channel hopping sequence
   referred as macHopSeq in the IEEE802.15.4 specification.     
   </t>
   
   <t>
   TODO
   - bandwidth, beam forming
   - expected capabilities for safety and automation, e.g., loops per second
   - caveats, e.g., latency in the backhaul or interference 
   - programming capabilities, is there a model for a flow, etc.
   </t>
   
   </section> <!-- General Characteristics  -->
   
   <section title="Applicability to Deterministic Flows">
   <t>
     -time synchronization
     - scheduling capabilities, discuss such things as Resource Units, time slots or resource blocks. 
       Can we reserve periodic resources vs. ask each time, what precision can we get in latency control.
     - diversity scenarios, what's available, 
     - gap analysis, e.g. discuss multihop, or what's missing how to do PAREO features.
   </t>
   </section><!-- Applicability to deterministic flows  -->
   
   </section><!-- title="tech X" -->
   
    <!--
      END
      <?rfc include="draft-include-raw-technologies-TSCH"?> 
   
     -->

   
   
  
   
   <!--
   
      <?rfc include="draft-include-raw-technologies-EHT"?> 
      <?rfc include="draft-include-raw-technologies-URLLC"?> 
   -->
   
   
   
   
   <section title="IANA Considerations">
      <t>
    This specification does not require IANA action.
      </t>
   </section>

   <section  anchor='sec' title="Security Considerations">
      <t>
    Most RAW  technologies integrate some authentication or encryption
    mechanisms that were defined outside the IETF. 
      </t>
   </section>
   <section title="Acknowledgments">
   <t>
    Many thanks to the participants of the RAW WG where a lot of the work discussed here happened.

   </t>
   </section><!-- ack -->
</middle>

<back>
   <references title="Normative References">
      <?rfc include="reference.RFC.8480"?> <!-- 6P Protocol Specification -->
      <?rfc include="reference.RFC.8200"?> <!-- Internet Protocol, Version 6 (IPv6) Specification -->
      <?rfc include='reference.I-D.ietf-detnet-architecture'?>
      <?rfc include='reference.I-D.ietf-6tisch-architecture'?>
      <?rfc include='reference.I-D.ietf-6tisch-msf'?>
      <?rfc include='reference.I-D.ietf-roll-nsa-extension'?>
      <!-- <?rfc include='reference.I-D.papadopoulos-6tisch-pre-reqs'?>-->
           
   </references>
   <references title="Informative References">
      <reference anchor="IEEE802154">
         <front>
            <title>IEEE Std. 802.15.4, Part. 15.4: Wireless Medium Access
            Control (MAC) and Physical Layer (PHY) Specifications for Low-Rate
            Wireless Personal Area Networks
            </title>
            <author>
               <organization>IEEE standard for Information Technology</organization>
            </author>
            <date/>
         </front>
      </reference>
      <reference anchor="IEEE80211" >
        <front>
          <title>
            IEEE Standard 802.11 - IEEE Standard for Information
            Technology - Telecommunications and information exchange
            between systems Local and metropolitan area networks -
            Specific requirements - Part 11: Wireless LAN Medium
            Access Control (MAC) and Physical Layer (PHY)
            Specifications. 
          </title>
          <author/>
          <date/>
        </front>
      </reference>
   </references>
</back>

</rfc>